{"version":3,"sources":["index.js"],"names":["Container","styled","div","Hr","hr","Title","h1","Textarea","textarea","Button","button","props","primary","css","circleAnimate","keyframes","Circle","li","jsonToResult","json","item","items","volumeInfo","authors","pop","categories","Circles","circles","Array","map","_","i","key","Search","value","this","inputText","onChange","onClick","disabled","searchButtonDisabled","searchButtonText","React","Component","App","state","results","e","target","setState","split","filter","v","forEach","title","index","search","preventDefault","fetch","then","res","result","detail","push","error","onChangeInputArea","bind","handleClick","Result","getResult","length","sort","a","b","details","textArea","createRef","current","select","document","execCommand","focus","defaultValue","ref","cols","rows","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.4a633301.chunk.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport styled, { css, keyframes } from 'styled-components'\n\nconst SEARCH_BUTTON_TEXT_DEFAULT = '検索';\nconst SEARCH_BUTTON_TEXT_RUNNING = '検索中...';\nconst MESSAGE_NOT_FOUND = '取得できませんでした';\n\nconst Container = styled.div`\n    text-align: center;\n    background: #4e54c8;\n    background: -webkit-linear-gradient(to left, #8f94fb, #4e54c8);\n    width: 100vw;\n    height:120vh;\n`;\n\nconst Hr = styled.hr`\n    height: 20px;\n    border-style: solid;\n    border-color: gray;\n    border-width: 1px 0 0 0;\n    border-radius: 200px;\n\n    &::before {\n        display: block;\n        content: \"\";\n        height: 20px;\n        margin-top: -20px;\n        border-style: gray;\n        border-color: black;\n        border-width: 0 0 1px 0;\n        border-radius: 100px;\n    }\n`;\n\nconst Title = styled.h1`\n    font-size: 2.5em;\n    text-align: center;\n    color: palevioletred;\n    padding-top: 1em;\n`;\n\nconst Textarea = styled.textarea`\n    font-size: 1em;\n    border: 1px solid gray;\n    border-radius: 3px;\n    width: 50vw;\n    height: 30vh;\n    max-width: 80vw;\n`;\n\nconst Button = styled.button`\n    background: transparent;\n    border-radius: 3px;\n    border: 2px solid palevioletred;\n    color: palevioletred;\n    margin: 0.5em 1em;\n    padding: 0.25em 1em;\n    font-size: 1.5em;\n\n    &:disabled {\n        background: gray;\n        border: none;\n    }\n\n    ${props => props.primary && css`\n      background: palevioletred;\n      color: white;\n    `}\n`;\n\nconst circleAnimate = keyframes`\n    from {\n        transform: translateY(0) rotate(0deg);\n        opacity: 1;\n        border-radius: 0;\n    }\n    to {\n        transform: translateY(-1500px) rotate(720deg);\n        opacity: 0;\n        border-radius: 50%;\n    }\n`;\n\nconst Circle = styled.li`\n    position: absolute;\n    display: block;\n    list-style: none;\n    width: 20px;\n    height: 20px;\n    background: rgba(255, 255, 255, 0.2);\n    animation: ${circleAnimate} 25s linear infinite;\n    bottom: -150px;\n\n    &:nth-child(1){\n        left: 25%;\n        width: 80px;\n        height: 80px;\n        animation-delay: 0s;\n    }\n\n    &:nth-child(2){\n        left: 10%;\n        width: 20px;\n        height: 20px;\n        animation-delay: 2s;\n        animation-duration: 12s;\n    }\n\n    &:nth-child(3){\n        left: 70%;\n        width: 20px;\n        height: 20px;\n        animation-delay: 4s;\n    }\n\n    &:nth-child(4){\n        left: 40%;\n        width: 60px;\n        height: 60px;\n        animation-delay: 0s;\n        animation-duration: 18s;\n    }\n\n    &:nth-child(5){\n        left: 65%;\n        width: 20px;\n        height: 20px;\n        animation-delay: 0s;\n    }\n\n    &:nth-child(6){\n        left: 75%;\n        width: 110px;\n        height: 110px;\n        animation-delay: 3s;\n    }\n\n    &:nth-child(7){\n        left: 35%;\n        width: 150px;\n        height: 150px;\n        animation-delay: 7s;\n    }\n\n    &:nth-child(8){\n        left: 50%;\n        width: 25px;\n        height: 25px;\n        animation-delay: 15s;\n        animation-duration: 45s;\n    }\n\n    &:nth-child(9){\n        left: 20%;\n        width: 15px;\n        height: 15px;\n        animation-delay: 2s;\n        animation-duration: 35s;\n    }\n\n    &:nth-child(10){\n        left: 85%;\n        width: 150px;\n        height: 150px;\n        animation-delay: 0s;\n        animation-duration: 11s;\n    }\n`;\n\n\nfunction jsonToResult(json) {\n    let item = json.items[0];\n    let author = item.volumeInfo.authors ? item.volumeInfo.authors.pop() : MESSAGE_NOT_FOUND;\n    let category = item.volumeInfo.categories ? item.volumeInfo.categories.pop() : MESSAGE_NOT_FOUND;\n    return '\\t' + author + '\\t' + category + '\\n';\n}\n\nfunction Circles() {\n    const circles = [...Array(10)].map((_,i) => <Circle key={i}></Circle>);\n    return(\n        <ul>\n            {circles}\n        </ul>\n    );\n\n}\n\nclass Search extends React.Component {\n    render() {\n        return (\n            <div>\n                <Title>著者検索</Title>\n                <Textarea\n                    value={this.props.inputText}\n                    onChange={this.props.onChange(this)}>\n                </Textarea>\n                <br />\n                <Button primary onClick={this.props.onClick(this)} disabled={this.props.searchButtonDisabled}>\n                    {this.props.searchButtonText}\n                </Button>\n            </div>\n        );\n    }\n}\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            inputText: '実験思考\\n結局人生はアウトプットで決まる',\n            searchButtonText: SEARCH_BUTTON_TEXT_DEFAULT,\n            searchButtonDisabled : false,\n            results: [],\n        };\n    }\n\n    onChangeInputArea(e) {\n        let inputText = e.target.value;\n        this.setState({\n            inputText: inputText,\n            searchButtonDisabled: inputText === '' ? true : false,\n        });\n    }\n\n    handleClick(e) {\n        this.setState({\n            searchButtonText: SEARCH_BUTTON_TEXT_RUNNING,\n            searchButtonDisabled: !e.target.disabled,\n            results: [],\n        });\n        // 改行区切りで配列化し、空文字要素を削除\n        let titles = this.state.inputText.split('\\n').filter(v => v);\n        titles.forEach((title, index) => this.search(title, index));\n        e.preventDefault();\n    }\n\n    search(title, index) {\n        fetch('https://www.googleapis.com/books/v1/volumes?q=' + title)\n        .then(res => res.json())\n        .then(\n            (json) => {\n                let result = {};\n                if(!json.items) {\n                    result = {index: index, detail: title + '\\t' + MESSAGE_NOT_FOUND + '\\t' + MESSAGE_NOT_FOUND + '\\n'};\n                }else {\n                    result = {index: index, detail: title + jsonToResult(json)};\n                }\n                this.state.results.push(result);\n                this.setState({\n                    searchButtonText: SEARCH_BUTTON_TEXT_DEFAULT,\n                    searchButtonDisabled: false,\n                    results: this.state.results,\n                });\n            },\n            (error) => {\n                this.setState({\n                    searchButtonText: SEARCH_BUTTON_TEXT_DEFAULT,\n                    searchButtonDisabled: false,\n                    results: {index: index, detail: 'リクエストに失敗しました'},\n                });\n            }\n        )\n    }\n\n    render() {\n        return (\n            <Container>\n                <Search\n                    inputText={this.state.inputText}\n                    onChange={() => this.onChangeInputArea.bind(this)}\n                    searchButtonText={this.state.searchButtonText}\n                    searchButtonDisabled={this.state.searchButtonDisabled}\n                    onClick={() => this.handleClick.bind(this)}\n                />\n                <Circles />\n                <Hr />\n                <Result results={this.state.results}/>\n            </Container>\n        );\n    }\n}\n\nfunction getResult(results) {\n    if (!results.length) return '';\n    // fetchで取得した結果は入力されたテキストと順番がバラバラなので、\n    // 入力テキストと順番を統一させるためソートする\n    results.sort((a, b) => a.index - b.index);\n    let details = '';\n    results.forEach((result) => details += result.detail);\n    return details;\n}\n\nclass Result extends React.Component {\n    constructor(props) {\n        super(props);\n        this.textArea = React.createRef();\n    }\n\n    onClick() {\n        this.textArea.current.select();\n        document.execCommand('copy');\n        this.textArea.current.focus();\n    }\n\n    render() {\n        return (\n            <div>\n                <Title>結果</Title>\n                <Textarea\n                    defaultValue={getResult(this.props.results)}\n                    ref={this.textArea}\n                    cols=\"100\" rows=\"15\">\n                </Textarea>\n                <br />\n                <Button onClick={this.onClick.bind(this)}>結果をコピー</Button>\n            </div>\n        );\n    }\n}\n\nReactDOM.render(\n    <App />,\n    document.getElementById('root')\n);\n"],"sourceRoot":""}